<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Εικονικό Πάρκο με A-Frame</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <!-- vibe-coding: custom scripts -->
    <script>
      // Component που εμφανίζει μήνυμα όταν κάνεις κλικ σε ένα δέντρο
      AFRAME.registerComponent('tree-interaction', {
        init: function () {
          this.el.addEventListener('click', () => {
            alert('Ένα δέντρο! 🌳');
          });
        }
      });

      // Component που αλλάζει το χρώμα του ουρανού
      AFRAME.registerComponent('sky-toggle', {
        init: function () {
          let colors = ['#88c', '#fc0', '#0cf'];
          let i = 0;
          this.el.addEventListener('click', () => {
            i = (i + 1) % colors.length;
            document.querySelector('a-sky').setAttribute('color', colors[i]);
          });
        }
      });

      // Component που παίζει ήχο όταν ο χρήστης πλησιάζει τη λίμνη
      AFRAME.registerComponent('lake-sound', {
        schema: {distance: {type: 'number', default: 4}},
        tick: function () {
          let player = document.querySelector('[camera]');
          let lake = this.el;
          let dist = lake.object3D.position.distanceTo(player.object3D.position);
          if (dist < this.data.distance && !this.played) {
            document.querySelector('#lake-audio').play();
            this.played = true;
          }
          if (dist >= this.data.distance) {
            this.played = false;
          }
        }
      });
    </script>
  </head>
  <body>
    <a-scene>
      <!-- Ουρανός -->
      <a-sky color="#88c"></a-sky>
      <!-- Δέντρα με αλληλεπίδραση -->
      <a-cylinder position="-3 0.5 -5" radius="0.5" height="2" color="#3b2" tree-interaction></a-cylinder>
      <a-sphere position="-3 2.2 -5" radius="1" color="#6c3" tree-interaction></a-sphere>
      
      <a-cylinder position="2 0.5 -4" radius="0.5" height="2" color="#3b2" tree-interaction></a-cylinder>
      <a-sphere position="2 2.2 -4" radius="1" color="#6c3" tree-interaction></a-sphere>
      <!-- Λίμνη -->
      <a-circle position="0 0 -8" radius="2" color="#0cf" lake-sound></a-circle>
      <audio id="lake-audio" src="https://cdn.pixabay.com/audio/2022/07/26/audio_124b6a6b96.mp3"></audio>
      <!-- Κουμπί για αλλαγή ουρανού -->
      <a-box position="0 1 -2" depth="0.2" height="0.5" width="1"
             color="#fc0" sky-toggle
             text="value: Αλλαγή ουρανού; color: #000"></a-box>
      <!-- Κάμερα χρήστη -->
      <a-entity camera wasd-controls look-controls position="0 1.6 0"></a-entity>
    </a-scene>
  </body>
</html>
