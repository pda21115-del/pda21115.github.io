<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Î•Î¹ÎºÎ¿Î½Î¹ÎºÏŒ Î Î¬ÏÎºÎ¿ Î¼Îµ A-Frame</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <!-- vibe-coding: custom scripts -->
    <script>
      // Component Ï€Î¿Ï… ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÎ¹ Î¼Î®Î½Ï…Î¼Î± ÏŒÏ„Î±Î½ ÎºÎ¬Î½ÎµÎ¹Ï‚ ÎºÎ»Î¹Îº ÏƒÎµ Î­Î½Î± Î´Î­Î½Ï„ÏÎ¿
      AFRAME.registerComponent('tree-interaction', {
        init: function () {
          this.el.addEventListener('click', () => {
            alert('ÎˆÎ½Î± Î´Î­Î½Ï„ÏÎ¿! ğŸŒ³');
          });
        }
      });

      // Component Ï€Î¿Ï… Î±Î»Î»Î¬Î¶ÎµÎ¹ Ï„Î¿ Ï‡ÏÏÎ¼Î± Ï„Î¿Ï… Î¿Ï…ÏÎ±Î½Î¿Ï
      AFRAME.registerComponent('sky-toggle', {
        init: function () {
          let colors = ['#88c', '#fc0', '#0cf'];
          let i = 0;
          this.el.addEventListener('click', () => {
            i = (i + 1) % colors.length;
            document.querySelector('a-sky').setAttribute('color', colors[i]);
          });
        }
      });

      // Component Ï€Î¿Ï… Ï€Î±Î¯Î¶ÎµÎ¹ Î®Ï‡Î¿ ÏŒÏ„Î±Î½ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Ï€Î»Î·ÏƒÎ¹Î¬Î¶ÎµÎ¹ Ï„Î· Î»Î¯Î¼Î½Î·
      AFRAME.registerComponent('lake-sound', {
        schema: {distance: {type: 'number', default: 4}},
        tick: function () {
          let player = document.querySelector('[camera]');
          let lake = this.el;
          let dist = lake.object3D.position.distanceTo(player.object3D.position);
          if (dist < this.data.distance && !this.played) {
            document.querySelector('#lake-audio').play();
            this.played = true;
          }
          if (dist >= this.data.distance) {
            this.played = false;
          }
        }
      });
    </script>
  </head>
  <body>
    <a-scene>
      <!-- ÎŸÏ…ÏÎ±Î½ÏŒÏ‚ -->
      <a-sky color="#88c"></a-sky>
      <!-- Î”Î­Î½Ï„ÏÎ± Î¼Îµ Î±Î»Î»Î·Î»ÎµÏ€Î¯Î´ÏÎ±ÏƒÎ· -->
      <a-cylinder position="-3 0.5 -5" radius="0.5" height="2" color="#3b2" tree-interaction></a-cylinder>
      <a-sphere position="-3 2.2 -5" radius="1" color="#6c3" tree-interaction></a-sphere>
      
      <a-cylinder position="2 0.5 -4" radius="0.5" height="2" color="#3b2" tree-interaction></a-cylinder>
      <a-sphere position="2 2.2 -4" radius="1" color="#6c3" tree-interaction></a-sphere>
      <!-- Î›Î¯Î¼Î½Î· -->
      <a-circle position="0 0 -8" radius="2" color="#0cf" lake-sound></a-circle>
      <audio id="lake-audio" src="https://cdn.pixabay.com/audio/2022/07/26/audio_124b6a6b96.mp3"></audio>
      <!-- ÎšÎ¿Ï…Î¼Ï€Î¯ Î³Î¹Î± Î±Î»Î»Î±Î³Î® Î¿Ï…ÏÎ±Î½Î¿Ï -->
      <a-box position="0 1 -2" depth="0.2" height="0.5" width="1"
             color="#fc0" sky-toggle
             text="value: Î‘Î»Î»Î±Î³Î® Î¿Ï…ÏÎ±Î½Î¿Ï; color: #000"></a-box>
      <!-- ÎšÎ¬Î¼ÎµÏÎ± Ï‡ÏÎ®ÏƒÏ„Î· -->
      <a-entity camera wasd-controls look-controls position="0 1.6 0"></a-entity>
    </a-scene>
  </body>
</html>
